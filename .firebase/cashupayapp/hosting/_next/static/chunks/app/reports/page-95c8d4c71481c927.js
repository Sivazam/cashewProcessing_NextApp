(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{37896:function(e,t,r){Promise.resolve().then(r.bind(r,25371))},25371:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var a=r(57437),s=r(2265),n=r(82666),l=r(28203),i=r(89314),d=r(39311),o=r(93023),c=r(37080),u=r(25831);function m(e){let{dateRange:t,onDateRangeChange:r,className:s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("grid gap-2",s),children:(0,a.jsxs)(u.J2,{children:[(0,a.jsx)(u.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{id:"date",variant:"outline",className:(0,d.cn)("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),(null==t?void 0:t.from)?t.to?(0,a.jsxs)(a.Fragment,{children:[(0,i.ZP)(t.from,"LLL dd, y")," -"," ",(0,i.ZP)(t.to,"LLL dd, y")]}):(0,i.ZP)(t.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date range"})]})}),(0,a.jsx)(u.yk,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(c.f,{initialFocus:!0,mode:"range",defaultMonth:null==t?void 0:t.from,selected:t,onSelect:r,numberOfMonths:2})})]})})}var f=r(24652),x=r(36076),h=function(e,t){let r=+(0,x.Q)(e),[a,s]=[+(0,x.Q)(t.start),+(0,x.Q)(t.end)].sort((e,t)=>e-t);return r>=a&&r<=s},g=r(86110),p=r(45253),j=r(39205),y=r(12001),N=r(24235),w=r(50039),b=r(39677),v=(0,j.z)({chartName:"BarChart",GraphicalChild:y.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:N.K},{axisType:"yAxis",AxisComp:w.B}],formatAxisMap:b.t9}),D=r(16573),P=r(86812),T=r(79857),Z=r(93330);function k(e){let{dateRange:t}=e,[r,n]=(0,s.useState)([]),{workLogs:l}=(0,Z.az)(),{selectedFirmId:d}=(0,Z.g6)();return((0,s.useEffect)(()=>{if(!d||!(null==t?void 0:t.from))return;let e=l.filter(e=>{let r=(0,f.Z)(e.date);return e.firmId===d&&h(r,{start:t.from,end:t.to||t.from})}),r={};e.forEach(e=>{let t=e.date;r[t]||(r[t]={date:t,kgs:0,amount:0}),r[t].kgs+=e.kgsProcessed,r[t].amount+=e.amountEarned});let a=Object.values(r).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),s=a.map(e=>({...e,formattedDate:(0,i.ZP)((0,f.Z)(e.date),"MMM dd")}));n(s)},[l,d,t]),d)?(null==t?void 0:t.from)?(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Production Report"}),(0,a.jsx)(g.SZ,{children:t.from&&t.to?"".concat((0,i.ZP)(t.from,"PPP")," - ").concat((0,i.ZP)(t.to,"PPP")):t.from?"".concat((0,i.ZP)(t.from,"PPP")):"Select date range"})]}),(0,a.jsx)(g.aY,{className:"h-[300px]",children:0===r.length?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No data available for selected period"})}):(0,a.jsx)(p.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(D.q,{strokeDasharray:"3 3"}),(0,a.jsx)(N.K,{dataKey:"formattedDate"}),(0,a.jsx)(w.B,{yAxisId:"left",orientation:"left",stroke:"#8884d8"}),(0,a.jsx)(w.B,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),(0,a.jsx)(P.u,{}),(0,a.jsx)(T.D,{}),(0,a.jsx)(y.$,{yAxisId:"left",dataKey:"kgs",name:"Kilograms Processed",fill:"hsl(var(--chart-1))"}),(0,a.jsx)(y.$,{yAxisId:"right",dataKey:"amount",name:"Amount Payable",fill:"hsl(var(--chart-2))"})]})})})]}):(0,a.jsx)(g.Zb,{children:(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Production Report"}),(0,a.jsx)(g.SZ,{children:"Please select a date range to view reports"})]})}):(0,a.jsx)(g.Zb,{children:(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Production Report"}),(0,a.jsx)(g.SZ,{children:"Please select a firm to view reports"})]})})}var C=r(32553);function _(e){let{dateRange:t}=e,[r,n]=(0,s.useState)([]),{workLogs:l}=(0,Z.az)(),{workers:i}=(0,Z.Es)(),{selectedFirmId:d}=(0,Z.g6)(),{settings:o}=(0,Z.F2)();return((0,s.useEffect)(()=>{if(!d||!(null==t?void 0:t.from))return;let e=l.filter(e=>{let r=(0,f.Z)(e.date);return e.firmId===d&&h(r,{start:t.from,end:t.to||t.from})}),r={};e.forEach(t=>{let{workerId:a,kgsProcessed:s,amountEarned:n,date:l}=t,d=i.find(e=>e.id===a);if(!d)return;r[a]||(r[a]={workerId:a,name:d.name,totalKgs:0,totalAmount:0,daysWorked:0,avgKgsPerDay:0}),r[a].totalKgs+=s,r[a].totalAmount+=n;let o=new Set;e.filter(e=>e.workerId===a).forEach(e=>o.add(e.date)),r[a].daysWorked=o.size,r[a].avgKgsPerDay=o.size>0?r[a].totalKgs/o.size:0});let a=Object.values(r).sort((e,t)=>t.totalKgs-e.totalKgs);n(a)},[l,i,d,t]),d)?(null==t?void 0:t.from)?(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Worker Performance"}),(0,a.jsx)(g.SZ,{children:"Comparison of worker productivity during selected period"})]}),(0,a.jsx)(g.aY,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:0===r.length?(0,a.jsx)("p",{className:"text-muted-foreground py-4",children:"No data available for selected period"}):(0,a.jsxs)(C.iA,{children:[(0,a.jsx)(C.xD,{children:(0,a.jsxs)(C.SC,{children:[(0,a.jsx)(C.ss,{children:"Worker"}),(0,a.jsx)(C.ss,{className:"text-right",children:"Total Kgs"}),(0,a.jsx)(C.ss,{className:"text-right",children:"Amount"}),(0,a.jsx)(C.ss,{className:"text-right",children:"Days Worked"}),(0,a.jsx)(C.ss,{className:"text-right",children:"Avg Kgs/Day"})]})}),(0,a.jsx)(C.RM,{children:r.map(e=>(0,a.jsxs)(C.SC,{children:[(0,a.jsx)(C.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(C.pj,{className:"text-right",children:e.totalKgs.toFixed(1)}),(0,a.jsxs)(C.pj,{className:"text-right",children:[o.currency," ",e.totalAmount.toFixed(0)]}),(0,a.jsx)(C.pj,{className:"text-right",children:e.daysWorked}),(0,a.jsx)(C.pj,{className:"text-right",children:e.avgKgsPerDay.toFixed(1)})]},e.workerId))})]})})})]}):(0,a.jsx)(g.Zb,{children:(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Worker Performance"}),(0,a.jsx)(g.SZ,{children:"Please select a date range to view worker performance"})]})}):(0,a.jsx)(g.Zb,{children:(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Worker Performance"}),(0,a.jsx)(g.SZ,{children:"Please select a firm to view worker performance"})]})})}function R(){let[e,t]=(0,s.useState)({from:new Date(new Date().setDate(new Date().getDate()-30)),to:new Date});return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col pb-20",children:[(0,a.jsx)(n.$,{}),(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Reports"}),(0,a.jsx)(m,{dateRange:e,onDateRangeChange:t,className:"w-full md:w-auto"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(k,{dateRange:e}),(0,a.jsx)(_,{dateRange:e})]})]})]})}},37080:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(57437);r(2265);var s=r(81291),n=r(17158),l=r(17859),i=r(39311),d=r(93023);function o(e){let{className:t,classNames:r,showOutsideDays:o=!0,...c}=e;return(0,a.jsx)(l._W,{showOutsideDays:o,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(s.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(n.Z,{className:"h-4 w-4"})}},...c})}o.displayName="Calendar"},32553:function(e,t,r){"use strict";r.d(t,{RM:function(){return d},SC:function(){return c},iA:function(){return l},pj:function(){return m},ss:function(){return u},xD:function(){return i}});var a=r(57437),s=r(2265),n=r(39311);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});d.displayName="TableBody";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})});o.displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});m.displayName="TableCell";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})});f.displayName="TableCaption"},24652:function(e,t,r){"use strict";var a=r(40500);let s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},n=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function o(e){return e&&parseFloat(e.replace(",","."))||0}let c=[31,null,31,30,31,30,31,31,30,31,30,31];function u(e){return e%400==0||e%4==0&&e%100!=0}t.Z=function(e,t){let r,m;let f=t?.additionalDigits??2,x=function(e){let t;let r={},a=e.split(s.dateTimeDelimiter);if(a.length>2)return r;if(/:/.test(a[0])?t=a[0]:(r.date=a[0],t=a[1],s.timeZoneDelimiter.test(r.date)&&(r.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=s.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(x.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};let s=a[1]?parseInt(a[1]):null,n=a[2]?parseInt(a[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((a[1]||a[2]).length)}}(x.date,f);r=function(e,t){if(null===t)return new Date(NaN);let r=e.match(n);if(!r)return new Date(NaN);let a=!!r[4],s=d(r[1]),l=d(r[2])-1,i=d(r[3]),o=d(r[4]),m=d(r[5])-1;if(a)return o>=1&&o<=53&&m>=0&&m<=6?function(e,t,r){let a=new Date(0);a.setUTCFullYear(e,0,4);let s=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+r+1-s)),a}(t,o,m):new Date(NaN);{let e=new Date(0);return l>=0&&l<=11&&i>=1&&i<=(c[l]||(u(t)?29:28))&&s>=1&&s<=(u(t)?366:365)?(e.setUTCFullYear(t,l,Math.max(s,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let h=r.getTime(),g=0;if(x.time&&isNaN(g=function(e){let t=e.match(l);if(!t)return NaN;let r=o(t[1]),s=o(t[2]),n=o(t[3]);return(24===r?0===s&&0===n:n>=0&&n<60&&s>=0&&s<60&&r>=0&&r<25)?r*a.vh+s*a.yJ+1e3*n:NaN}(x.time)))return new Date(NaN);if(x.timezone){if(isNaN(m=function(e){if("Z"===e)return 0;let t=e.match(i);if(!t)return 0;let r="+"===t[1]?-1:1,s=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return n>=0&&n<=59?r*(s*a.vh+n*a.yJ):NaN}(x.timezone)))return new Date(NaN)}else{let e=new Date(h+g),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(h+g+m)}}},function(e){e.O(0,[953,199,278,105,647,5,971,864,744],function(){return e(e.s=37896)}),_N_E=e.O()}]);