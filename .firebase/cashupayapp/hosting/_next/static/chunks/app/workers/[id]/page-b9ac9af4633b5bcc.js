(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[194],{22759:function(e,r,s){Promise.resolve().then(s.bind(s,66466))},66466:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return M}});var t=s(57437),a=s(2265),o=s(24033),n=s(89314),d=s(24652),l=s(79303),i=s(82666),c=s(93023),m=s(39213),x=s(39311);let u=(0,m.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h(e){let{className:r,variant:s,...a}=e;return(0,t.jsx)("div",{className:(0,x.cn)(u({variant:s}),r),...a})}var f=s(86110),g=s(34522);let b=g.fC,j=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(g.aV,{ref:r,className:(0,x.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});j.displayName=g.aV.displayName;let p=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(g.xz,{ref:r,className:(0,x.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});p.displayName=g.xz.displayName;let N=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(g.VY,{ref:r,className:(0,x.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});N.displayName=g.VY.displayName;var v=s(32553),y=s(87516),w=s(81291),k=s(78063),C=s(12741),Z=s(64248),A=s(34822),P=s(4893),z=s(28692),T=s(38536),R=s(13116),E=s(6141),S=s(1351),O=s(71738),D=s(80921),_=s(84705),W=s(25750),Y=s(93330),V=s(11552),G=s(77094),B=s(71424),H=s(16691),L=s.n(H);function M(){let e=(0,o.useParams)(),r=(0,o.useRouter)(),s=e.id,{workers:m,updateWorker:x}=(0,Y.Es)(),{workLogs:u,payments:g,getWorkLogsByWorker:H,getPaymentsByWorker:M}=(0,Y.az)(),{settings:$}=(0,Y.F2)(),[F,I]=(0,a.useState)(m.find(e=>e.id===s)),[K,q]=(0,a.useState)(H(s)),[J,Q]=(0,a.useState)(M(s)),[U,X]=(0,a.useState)(!1),[ee,er]=(0,a.useState)(!1),[es,et]=(0,a.useState)("advance"),[ea,eo]=(0,a.useState)(!1);(0,a.useEffect)(()=>{I(m.find(e=>e.id===s)),q(H(s)),Q(M(s))},[s,m,u,g,H,M]);let en=e=>{et(e),er(!0)};if(!F)return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col bg-background",children:[(0,t.jsx)(i.$,{}),(0,t.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>r.back(),className:"text-muted-foreground hover:text-foreground transition-colors",children:[(0,t.jsx)(w.Z,{className:"mr-2 h-4 w-4"})," Back"]}),(0,t.jsx)("div",{className:"flex h-[400px] items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center bg-card p-8 rounded-xl shadow-sm border border-border",children:[(0,t.jsx)(k.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,t.jsx)("h3",{className:"text-xl font-medium text-foreground",children:"Worker not found"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 mb-4",children:"The worker you're looking for doesn't exist or has been deleted"}),(0,t.jsx)(c.z,{onClick:()=>r.push("/workers"),className:"mt-4 bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Go to Workers"})]})})]})]});let ed=[...K].sort((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()),el=[...J].sort((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()),ei=J.filter(e=>"advance"===e.type).reduce((e,r)=>e+r.amount,0),ec=J.filter(e=>"payout"===e.type).reduce((e,r)=>e+r.amount,0),em=F.totalAmount-ei-ec;return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col bg-background pb-20",children:[(0,t.jsx)(i.$,{}),(0,t.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-8 pt-6 pb-24 md:pb-8",children:[(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-card rounded-xl shadow-sm border border-border p-6",children:[(0,t.jsx)("div",{className:"flex items-center mb-6",children:(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>r.back(),className:"mr-4 text-muted-foreground hover:text-foreground transition-colors",children:[(0,t.jsx)(w.Z,{className:"mr-2 h-4 w-4"})," Back"]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"relative w-16 h-16 rounded-full overflow-hidden border-2 border-border shadow-sm",children:F.avatar?(0,t.jsx)(L(),{src:null==F?void 0:F.avatar,alt:F.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-pink-500 to-rose-500 flex items-center justify-center text-white text-xl font-bold",children:F.name.charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-foreground",children:F.name}),F.phone&&(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center mt-1",children:[(0,t.jsx)(C.Z,{className:"h-3 w-3 mr-1"}),F.phone]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>X(!0),className:"text-foreground hover:bg-accent transition-colors",children:[(0,t.jsx)(Z.Z,{className:"mr-2 h-4 w-4 text-primary"})," Add Work"]}),(0,t.jsxs)(c.z,{onClick:()=>en("advance"),className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(A.Z,{className:"mr-2 h-4 w-4"})," Give Advance"]}),(0,t.jsxs)(c.z,{onClick:()=>en("payout"),className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(A.Z,{className:"mr-2 h-4 w-4"})," Process Payout"]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:(0,t.jsxs)(f.Zb,{className:"border-border shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)(f.Ol,{className:"pb-2",children:(0,t.jsxs)(f.ll,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 mr-2 text-primary/70"}),"Total Processed"]})}),(0,t.jsx)(f.aY,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[F.totalKgsProcessed," kg"]})})]})}),(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:(0,t.jsxs)(f.Zb,{className:"border-border shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)(f.Ol,{className:"pb-2",children:(0,t.jsxs)(f.ll,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-2 text-primary/70"}),"Total Earned"]})}),(0,t.jsx)(f.aY,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[$.currency," ",F.totalAmount]})})]})}),(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:(0,t.jsxs)(f.Zb,{className:"border-border shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)(f.Ol,{className:"pb-2",children:(0,t.jsx)(f.ll,{className:"text-sm font-medium text-muted-foreground",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-2 text-primary/70"}),(0,t.jsx)("span",{children:"Advances"})]}),F.advanceAmount>0&&(0,t.jsxs)(h,{variant:"outline",className:"cursor-pointer hover:bg-accent text-muted-foreground ml-2 transition-colors",onClick:()=>eo(!0),children:[(0,t.jsx)(R.Z,{className:"h-3 w-3 mr-1"}),"Clear"]})]})})}),(0,t.jsx)(f.aY,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[$.currency," ",F.advanceAmount]})})]})}),(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:(0,t.jsxs)(f.Zb,{className:"border-border shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)(f.Ol,{className:"pb-2",children:(0,t.jsxs)(f.ll,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 text-primary/70"}),"Pending Amount"]})}),(0,t.jsx)(f.aY,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold ".concat(em>0?"text-green-600 dark:text-green-400":"text-foreground"),children:[$.currency," ",em]})})]})})]}),(0,t.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.6},className:"bg-card rounded-xl shadow-sm border border-border p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-6",children:"Worker History"}),(0,t.jsxs)(b,{defaultValue:"work-logs",className:"w-full",children:[(0,t.jsxs)(j,{className:"w-full flex mb-6 bg-muted p-1 rounded-lg",children:[(0,t.jsxs)(p,{value:"work-logs",className:"flex-1 data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-md transition-all",children:[(0,t.jsx)(S.Z,{className:"mr-2 h-4 w-4"})," Work Logs"]}),(0,t.jsxs)(p,{value:"payments",className:"flex-1 data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-md transition-all",children:[(0,t.jsx)(O.Z,{className:"mr-2 h-4 w-4"})," Payments"]})]}),(0,t.jsx)(N,{value:"work-logs",className:"mt-0",children:0===ed.length?(0,t.jsx)("div",{className:"flex h-[200px] items-center justify-center rounded-lg border border-dashed border-border bg-muted/30",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[(0,t.jsx)(D.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No work logs found"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1 mb-4",children:"Get started by adding a work log"}),(0,t.jsxs)(c.z,{onClick:()=>X(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(Z.Z,{className:"mr-2 h-4 w-4"})," Add Work Log"]})]})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(v.iA,{className:"w-full",children:[(0,t.jsx)(v.xD,{children:(0,t.jsxs)(v.SC,{className:"hover:bg-muted/30",children:[(0,t.jsx)(v.ss,{className:"w-1/3 text-muted-foreground",children:"Date"}),(0,t.jsx)(v.ss,{className:"text-right text-muted-foreground",children:"Kgs Processed"}),(0,t.jsx)(v.ss,{className:"text-right text-muted-foreground",children:"Amount Earned"})]})}),(0,t.jsx)(v.RM,{children:ed.map(e=>(0,t.jsxs)(v.SC,{className:"hover:bg-muted/30 border-b border-border",children:[(0,t.jsx)(v.pj,{className:"font-medium text-foreground",children:(0,n.ZP)((0,d.Z)(e.date),"PPP")}),(0,t.jsxs)(v.pj,{className:"text-right text-foreground",children:[e.kgsProcessed," kg"]}),(0,t.jsxs)(v.pj,{className:"text-right font-medium text-foreground",children:[$.currency," ",e.amountEarned]})]},e.id))})]})})}),(0,t.jsx)(N,{value:"payments",className:"mt-0",children:0===el.length?(0,t.jsx)("div",{className:"flex h-[200px] items-center justify-center rounded-lg border border-dashed border-border bg-muted/30",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[(0,t.jsx)(_.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No payments found"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1 mb-4",children:"Get started by recording a payment"}),(0,t.jsxs)(c.z,{onClick:()=>en("advance"),className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(A.Z,{className:"mr-2 h-4 w-4"})," Record Payment"]})]})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(v.iA,{className:"w-full",children:[(0,t.jsx)(v.xD,{children:(0,t.jsxs)(v.SC,{className:"hover:bg-muted/30",children:[(0,t.jsx)(v.ss,{className:"w-1/3 text-muted-foreground",children:"Date"}),(0,t.jsx)(v.ss,{className:"text-muted-foreground",children:"Type"}),(0,t.jsx)(v.ss,{className:"text-right text-muted-foreground",children:"Amount"})]})}),(0,t.jsx)(v.RM,{children:el.map(e=>(0,t.jsxs)(v.SC,{className:"hover:bg-muted/30 border-b border-border",children:[(0,t.jsx)(v.pj,{className:"font-medium text-foreground",children:(0,n.ZP)((0,d.Z)(e.date),"PPP")}),(0,t.jsx)(v.pj,{className:"text-foreground",children:(0,t.jsx)(h,{variant:"advance"===e.type?"outline":"default",className:"advance"===e.type?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800/60":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800/60",children:"advance"===e.type?"Advance":"Payout"})}),(0,t.jsxs)(v.pj,{className:"text-right font-medium text-foreground",children:[$.currency," ",e.amount]})]},e.id))})]})})})]})]}),(0,t.jsx)(y.aR,{open:ea,onOpenChange:eo,children:(0,t.jsxs)(y._T,{className:"bg-background rounded-2xl border-border shadow-lg",children:[(0,t.jsxs)(y.fY,{children:[(0,t.jsx)(y.f$,{className:"text-foreground",children:"Clear Advance?"}),(0,t.jsxs)(y.yT,{className:"text-muted-foreground",children:["This will clear the advance amount of ",$.currency," ",F.advanceAmount," for ",F.name,". Are you sure you want to proceed?"]})]}),(0,t.jsxs)(y.xo,{className:"gap-2",children:[(0,t.jsx)(y.le,{className:"bg-background text-foreground border-border hover:bg-muted transition-colors",children:"Cancel"}),(0,t.jsx)(y.OL,{onClick:()=>{F&&(x(s,{advanceAmount:0}),eo(!1),B.Am.success("Advance cleared for ".concat(F.name)))},className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Clear Advance"})]})]})}),(0,t.jsx)(V.e,{open:U,onOpenChange:X,workerId:F.id}),(0,t.jsx)(G.o,{open:ee,onOpenChange:er,workerId:F.id,defaultType:es}),(0,t.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-lg flex justify-around p-3 z-50",children:[(0,t.jsxs)(c.z,{variant:"ghost",size:"sm",className:"flex flex-col items-center text-xs py-1 h-auto text-muted-foreground hover:text-primary transition-colors",onClick:()=>X(!0),children:[(0,t.jsx)(Z.Z,{className:"h-5 w-5 mb-1"}),(0,t.jsx)("span",{children:"Add Work"})]}),(0,t.jsxs)(c.z,{variant:"ghost",size:"sm",className:"flex flex-col items-center text-xs py-1 h-auto text-muted-foreground hover:text-primary transition-colors",onClick:()=>en("advance"),children:[(0,t.jsx)(A.Z,{className:"h-5 w-5 mb-1"}),(0,t.jsx)("span",{children:"Advance"})]}),(0,t.jsxs)(c.z,{variant:"ghost",size:"sm",className:"flex flex-col items-center text-xs py-1 h-auto text-muted-foreground hover:text-primary transition-colors",onClick:()=>en("payout"),children:[(0,t.jsx)(A.Z,{className:"h-5 w-5 mb-1"}),(0,t.jsx)("span",{children:"Payout"})]}),(0,t.jsxs)(c.z,{variant:"ghost",size:"sm",className:"flex flex-col items-center text-xs py-1 h-auto text-muted-foreground hover:text-primary transition-colors",onClick:()=>r.push("/workers"),children:[(0,t.jsx)(W.Z,{className:"h-5 w-5 mb-1"}),(0,t.jsx)("span",{children:"All Workers"})]})]})]})]})}},32553:function(e,r,s){"use strict";s.d(r,{RM:function(){return l},SC:function(){return c},iA:function(){return n},pj:function(){return x},ss:function(){return m},xD:function(){return d}});var t=s(57437),a=s(2265),o=s(39311);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,o.cn)("w-full caption-bottom text-sm",s),...a})})});n.displayName="Table";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("thead",{ref:r,className:(0,o.cn)("[&_tr]:border-b",s),...a})});d.displayName="TableHeader";let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tbody",{ref:r,className:(0,o.cn)("[&_tr:last-child]:border-0",s),...a})});l.displayName="TableBody";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tfoot",{ref:r,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})});i.displayName="TableFooter";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tr",{ref:r,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});c.displayName="TableRow";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("th",{ref:r,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});m.displayName="TableHead";let x=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("td",{ref:r,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});x.displayName="TableCell";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("caption",{ref:r,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",s),...a})});u.displayName="TableCaption"}},function(e){e.O(0,[953,199,278,725,276,691,438,647,5,302,971,864,744],function(){return e(e.s=22759)}),_N_E=e.O()}]);